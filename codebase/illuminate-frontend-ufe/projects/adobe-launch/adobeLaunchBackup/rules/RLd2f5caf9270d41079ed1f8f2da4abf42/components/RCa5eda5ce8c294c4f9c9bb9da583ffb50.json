{
    "id": "RCa5eda5ce8c294c4f9c9bb9da583ffb50",
    "type": "rule_components",
    "attributes": {
        "created_at": "2023-02-14T22:00:49.669Z",
        "delegate_descriptor_id": "core::actions::custom-code",
        "deleted_at": null,
        "dirty": false,
        "name": "TAG: GA4_purchase",
        "negate": false,
        "order": 0,
        "rule_order": 50,
        "timeout": 2000,
        "delay_next": true,
        "published": true,
        "published_at": null,
        "revision_number": 0,
        "updated_at": "2025-04-28T15:30:29.398Z",
        "created_by_email": "rachel.joss@sephora.com",
        "created_by_display_name": "rachel joss",
        "updated_by_email": "gustavo.rodriguez@sephora.com",
        "updated_by_display_name": "Gustavo Rodriguez",
        "settings": "{\"source\":\"var transactionTax = _satellite.getVar('[TMS] Google Analytics :: Transaction :: Tax');\\nvar transactionShipping = _satellite.getVar('[TMS] Google Analytics :: Transaction :: Shipping');\\nvar transactionValue = digitalData.transaction.total.transactionSubtotalInUSD;\\nvar transactionId = _satellite.getVar('[TMS] Page :: Order Number');\\nvar transactionItems = JSON.parse(_satellite.getVar('[TMS] GA4 :: Transaction :: Items')) || [];\\nvar transactionCoupon = _satellite.getVar('[TMS] Page :: Promo Code');\\nvar filteredItems = transactionItems.filter(function(item) {\\n    return item.type === 'Standard' \\u0026\\u0026 item.price.indexOf('Points') \\u003c= -1;\\n});\\n\\nvar transactionCurrency = 'USD';\\n\\nvar om_mmc_value = Sephora.analytics.utils.getQueryParam('om_mmc') || '';\\n\\ngtag('event', 'purchase', { \\n  'send_to': _satellite.getVar('[TMS] GA4 Measurement Id'), \\n  'transaction_id': transactionId, \\n  'value': transactionValue, \\n  'tax': transactionTax, \\n  'shipping': transactionShipping, \\n  'currency': transactionCurrency, \\n  'coupon': transactionCoupon,  \\n  'items': transactionItems,\\n  'om_mmc': om_mmc_value\\n});\",\"language\":\"javascript\"}"
    },
    "relationships": {
        "updated_with_extension_package": {
            "links": {
                "related": "https://reactor.adobe.io/rule_components/RCa5eda5ce8c294c4f9c9bb9da583ffb50/updated_with_extension_package"
            },
            "data": {
                "id": "EP1fdd2a6ec2ae468fb1d2cac08df65f83",
                "type": "extension_packages"
            }
        },
        "updated_with_extension": {
            "links": {
                "related": "https://reactor.adobe.io/rule_components/RCa5eda5ce8c294c4f9c9bb9da583ffb50/updated_with_extension"
            },
            "data": {
                "id": "EX35ce3802460d499b9f4c856d69a764b4",
                "type": "extensions"
            }
        },
        "extension": {
            "links": {
                "related": "https://reactor.adobe.io/rule_components/RCa5eda5ce8c294c4f9c9bb9da583ffb50/extension"
            },
            "data": {
                "id": "EX881e591abc3d4b29b9681e2a4d337f74",
                "type": "extensions"
            }
        },
        "notes": {
            "links": {
                "related": "https://reactor.adobe.io/rule_components/RCa5eda5ce8c294c4f9c9bb9da583ffb50/notes"
            }
        },
        "origin": {
            "links": {
                "related": "https://reactor.adobe.io/rule_components/RCa5eda5ce8c294c4f9c9bb9da583ffb50/origin"
            },
            "data": {
                "id": "RCa5eda5ce8c294c4f9c9bb9da583ffb50",
                "type": "rule_components"
            }
        },
        "property": {
            "links": {
                "related": "https://reactor.adobe.io/properties/PR28bc45fcba184e70b64b2f0cf7fe70f8"
            },
            "data": {
                "id": "PR28bc45fcba184e70b64b2f0cf7fe70f8",
                "type": "properties"
            }
        },
        "rules": {
            "links": {
                "related": "https://reactor.adobe.io/rule_components/RCa5eda5ce8c294c4f9c9bb9da583ffb50/rules"
            }
        }
    },
    "links": {
        "extension": "https://reactor.adobe.io/extensions/EX881e591abc3d4b29b9681e2a4d337f74",
        "origin": "https://reactor.adobe.io/rule_components/RCa5eda5ce8c294c4f9c9bb9da583ffb50",
        "rules": "https://reactor.adobe.io/rule_components/RCa5eda5ce8c294c4f9c9bb9da583ffb50/rules",
        "self": "https://reactor.adobe.io/rule_components/RCa5eda5ce8c294c4f9c9bb9da583ffb50"
    },
    "meta": {
        "latest_revision_number": 5
    }
}
