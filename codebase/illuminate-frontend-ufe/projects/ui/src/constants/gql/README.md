# Warning

Content of this folder and subfolders is autogenerated. Don't edit it manually!  
See step 4 below to get updated GQL operations in UFE.

# Adding GraphQL Operations in UFE

When adding new GraphQL operations for UFE, you won't commit them directly into the UFE repository. This is because we leverage Persisted Queries, using a separate, communal repository to house all client GraphQL operations.

Confluence Doc: https://confluence.sephora.com/wiki/display/FEE/GQL+In+UFE

## Testing Your Query - IMPORTANT

Before committing your PR in the PQL repo, be sure your query works in Apollo Studio:
https://studio.apollographql.com/graph/Sephora-Enterprise-Graph/variant/qa/explorer

If you need access go to: https://studio.apollographql.com/login?from=%2F and use the "Sign in with SSO" option.

## Process for Contributing New GraphQL Operations

### 1. Clone the Persisted Queries Repository

Begin by cloning the dedicated repository:
https://github.com/Sephora-US-Digital/sephora-persisted-query-lists

### 2. Add Your GraphQL Operation

Place your new query or mutation file within the `shared/gql/queries` or `shared/gql/mutations` directory, respectively. It's crucial to nest your `.gql` file within a subdirectory that mirrors the corresponding UFE folder structure.

**Example:** If your GraphQL operation pertains to the profile section in UFE, its path would look like `shared/gql/queries/profile/customerLimit.gql`.

Refer to existing examples in the repository for guidance.

**Important:** Before committing your code on dev to the PQL repo ensure you run `npm run update-manifests` so that the updated manifest is part of your commit.

### 3. Submit and Merge Your Pull Request

Open a Pull Request in the `sephora-persisted-query-lists` repository, targeting the `dev` branch. Once your PR has been reviewed and merged, the new GraphQL operation will be available in the shared list.

### 4. Synchronize UFE

After your GraphQL PR is merged in `sephora-persisted-query-lists`, you must run the `update-gql-operations` command within the UFE repository:

```
npm run update-gql-operations --workspace=ui
```

This command synchronizes UFE with the latest GraphQL operations. Following this, open a corresponding PR in UFE to complete the synchronization between the two repositories.

## Release Process

When you need your query to go out with release, we will do a biweekly merge in the PQL repo from `dev` â†’ `master` using a release branch.
This will also require one of our Graph Admins (See PQL Repo Readme.md for a list of admins) to publish your sha to GraphOS PQL lists per environment.
