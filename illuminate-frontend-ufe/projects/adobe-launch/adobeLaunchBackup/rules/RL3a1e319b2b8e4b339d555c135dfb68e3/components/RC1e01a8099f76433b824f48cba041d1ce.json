{
    "id": "RC1e01a8099f76433b824f48cba041d1ce",
    "type": "rule_components",
    "attributes": {
        "created_at": "2022-09-08T22:18:21.181Z",
        "delegate_descriptor_id": "core::actions::custom-code",
        "deleted_at": null,
        "dirty": false,
        "name": "Core - Custom Code",
        "negate": false,
        "order": 1,
        "rule_order": 50,
        "timeout": 2000,
        "delay_next": true,
        "published": false,
        "published_at": null,
        "revision_number": 0,
        "updated_at": "2025-07-07T12:40:38.375Z",
        "created_by_email": "Ravinderreddy.Mandala@sephora.com",
        "created_by_display_name": "Ravinderreddy Mandala",
        "updated_by_email": "abhinav.alkuchi@sephora.com",
        "updated_by_display_name": "abhinav alkuchi",
        "settings": "{\"source\":\"\\n//console.log(\\\"sot log purchase tag from adobe launch\\\");\\n(async function () {\\n  function readCookie(name) {\\n      let nameEQ = name + \\\"=\\\";\\n      let ca = document.cookie.split(\\\";\\\");\\n      for (let i = 0; i \\u003c ca.length; i++) {\\n          let c = ca[i];\\n          while (c.charAt(0) === \\\" \\\") c = c.substring(1, c.length);\\n          if (c.indexOf(nameEQ) === 0)\\n              return c.substring(nameEQ.length, c.length);\\n      }\\n      return null;\\n  }\\n\\n  function setCookie(params) {\\n  var name = params.name,\\n    value = params.value,\\n    expireDays = params.days,\\n    expireHours = params.hours,\\n    expireMinutes = params.minutes,\\n    expireSeconds = params.seconds;\\n\\n  var expireDate = new Date();\\n  if (expireDays) {\\n    expireDate.setDate(expireDate.getDate() + expireDays);\\n  }\\n  if (expireHours) {\\n    expireDate.setHours(expireDate.getHours() + expireHours);\\n  }\\n  if (expireMinutes) {\\n    expireDate.setMinutes(expireDate.getMinutes() + expireMinutes);\\n  }\\n  if (expireSeconds) {\\n    expireDate.setSeconds(expireDate.getSeconds() + expireSeconds);\\n  }\\n  document.cookie =\\n    name +\\n    \\\"=\\\" +\\n    escape(value) +\\n    \\\";Secure\\\" +\\n    \\\";domain=sephora.com\\\" +\\n    \\\";path=/\\\" +\\n    \\\";expires=\\\" +\\n    expireDate.toUTCString();\\n  }\\n\\n  function safelyReadProperty(attributePath, objectInfo) {\\n      return Sephora.analytics.utils.safelyReadProperty(attributePath, objectInfo);\\n  }\\n\\n  function formatSotType(sotType) {\\n      return sotType \\u0026\\u0026 sotType.toLowerCase().replace(/([\\\\:\\\\-])/g, \\\" \\\");\\n  }\\n\\n  function getValidLinkName(sotType) {\\n          if(typeof sotType === \\\"undefined\\\" || sotType === null || sotType === \\\"null\\\") {\\n              return false;\\n              } \\n              return true;\\n  }\\n\\n  function getValues(attr) {\\n  let respValue = '';\\n  if(attr \\u0026\\u0026 attr.length \\u003e 0) {\\n      for (var i = 0; i \\u003c attr.length; i++) {\\n          respValue += attr[i] + (attr.length - 1 === i ? \\\";\\\" : \\\";\\\");\\n      }\\n  }\\n  return respValue;\\n  }\\n\\n  function setSotV63(shippingMethod, linkName) {\\n      shippingMethod = shippingMethod ? shippingMethod.toLowerCase() : (linkName === 'BOPIS' ? 'buy online and pick up' : '');\\n      const sddSkuIds = digitalData.transaction.attributes.sdd.skuIds;\\n      let skuIds = digitalData.transaction.attributes.skuIds;\\n      let standardSkuIds = [], sotV63 = \\\"\\\";\\n\\n      for (let i = 0; i \\u003c skuIds.length; i++) {\\n          standardSkuIds[i] = skuIds[i];\\n      }\\n\\n      for (let i = standardSkuIds.length - 1; i \\u003e= 0; i--) {\\n          for (let j = 0; j \\u003c sddSkuIds.length; j++) {\\n              if ((standardSkuIds[i] === sddSkuIds[j])) {\\n                  standardSkuIds.splice(i, 1);\\n              }\\n          }\\n      }\\n\\n      if (shippingMethod === \\\"buy online and pick up\\\") {\\n          sotV63 = shippingMethod + \\\":\\\" + skuIds.join(\\\",\\\");\\n      }\\n      else {\\n          shippingMethod = shippingMethod.split(\\\",\\\");\\n          if (shippingMethod \\u0026\\u0026 shippingMethod.length) {\\n              shippingMethod = shippingMethod.filter(function (item) {\\n                  return item !== 'usps first class'\\n              })\\n          }\\n          for (let i = 0; i \\u003c shippingMethod.length; i++) {\\n              if (shippingMethod[i] \\u0026\\u0026 shippingMethod[i].toLowerCase().indexOf(\\\"same day delivery\\\") !== -1) {\\n                  sotV63 = sotV63 + \\\"same day delivery\\\" + \\\":\\\" + sddSkuIds.join(\\\",\\\");\\n              }\\n              else {\\n                  sotV63 = sotV63 + \\\"standard\\\" + \\\":\\\" + standardSkuIds.join(\\\",\\\");\\n              }\\n              sotV63 = sotV63 + (i === (shippingMethod.length - 1) ? \\\"\\\" : \\\";\\\");\\n          }\\n      }\\n      return sotV63;\\n  }\\n\\n  function getParentCategoryFromSkuList(obj, searchKey){\\n  let results = [];\\n  for (const key in obj) {\\n    if (key === searchKey \\u0026\\u0026 typeof obj[key] !== 'object') {\\n      results.push(obj[key]);\\n    } else if (typeof obj[key] === 'object') {\\n      results = results.concat(getParentCategoryFromSkuList(obj[key], searchKey));\\n    }\\n  }\\n  return results.length \\u003e 0 ? results[results.length - 1] : \\\"\\\";\\n }\\n\\nfunction getTransactionItemInfo() {\\n  let categoryIds = [],\\n    displayNames = [],\\n    urls = [],\\n    transactionItems = digitalData?.transaction?.item;\\n  if (transactionItems?.length) {\\n    for (let itm = 0; itm \\u003c transactionItems.length; itm++) {\\n      let catId = transactionItems[itm]?.sku?.parentCategory?.categoryId;\\n      let dispName = transactionItems[itm]?.sku?.parentCategory?.displayName;\\n      let url = transactionItems[itm]?.sku?.url;\\n      catId ? categoryIds.push(catId) : \\\"\\\";\\n      dispName ? displayNames.push(dispName) : \\\"\\\";\\n      url ? urls.push(url) : \\\"\\\";\\n    }\\n  }\\n  return {\\n    categoryIds: categoryIds.length ? categoryIds.join() : \\\"\\\",\\n    displayNames: displayNames.length ? displayNames.join() : \\\"\\\",\\n    urls: urls.length ? urls.join() : \\\"\\\"\\n  };\\n}\\n\\nfunction deleteCookie(name) {\\n  setCookie({ name: name, value: \\\"\\\", seconds: 1 });\\n}\\n\\nfunction checkSkuInReferrerLink(skuIdsString, referrerLink) {\\n  if (!referrerLink || !skuIdsString) {\\n      return false;\\n  }\\n  const skuIds = skuIdsString.split(';');\\n  return skuIds.some(skuId =\\u003e referrerLink.includes(skuId));\\n}\\n\\nfunction mergeObjects() {\\n  var resObject = {};\\n  for (var i = 0; i \\u003c arguments.length; i++) {\\n    var obj = arguments[i];\\n    var keys = obj ? Object.keys(obj) : [];\\n    for (var j = 0; j \\u003c keys.length; j++) {\\n      if (resObject[keys[j]]) {\\n        resObject[keys[j]] = mergeObjects(resObject[keys[j]], obj[keys[j]]);\\n      } else {\\n        resObject[keys[j]] = obj[keys[j]];\\n      }\\n    }\\n  }\\n  return resObject;\\n}\\n  \\n  function getBreadcrumbCategoryDisplayPaths(data) {\\n  const getCategoryChain = (category) =\\u003e {\\n    const names = [];\\n    let current = category;\\n\\n    while (current) {\\n      names.unshift(current.displayName);\\n      current = current.parentCategory;\\n    }\\n\\n    return names.join(\\\"\\u003e\\\");\\n  };\\n\\n  return (data \\u0026\\u0026 data.length \\u003e 0) ? data.map((item) =\\u003e getCategoryChain(item?.sku?.parentCategory)).join(\\\";\\\") : \\\"\\\";\\n}\\n\\n\\n  try {\\n      let purchaseEvents = _satellite.getVar('[TMS] SOT :: Purchase Events');\\n\\n      let ipAddress = await _satellite.getVar(\\\"[SOT] System :: IP Address\\\");\\n      let promoCode = _satellite.getVar('[TMS] Page :: Promo Code');\\n\\n\\n      let linkName = digitalData.page.attributes.eventStrings.indexOf(\\\"event64\\\") !== -1 ? 'BOPIS' : '';\\n\\n      // To disable tracking for event, update below condition to false\\n      let allowPurchaseTracking = purchaseEvents.Purchase;\\n      let allowXTPurchaseTracking = purchaseEvents[linkName];\\n      let allowTracking = allowPurchaseTracking || allowXTPurchaseTracking;\\n      let SephSession = readCookie(\\\"SephSession\\\");\\n      let birthdayGift = digitalData.transaction.item.filter((itm) =\\u003e {\\n          return itm.listPriceSubtotal.toLowerCase() === 'birthday gift';\\n      });\\n    \\n      let promoCodeRedemption = digitalData?.transaction?.attributes?.promoCodes.length \\u003e 0 || false;\\n      let gclid = new URL(window.location.href).searchParams.get(\\\"gclid\\\");\\n      let epikLS = JSON.parse(window.localStorage.getItem(\\\"_epik_ls\\\"));\\n      let epikLSValid = epikLS?.expires \\u0026\\u0026 epikLS?.value \\u0026\\u0026 !isNaN(new Date(epikLS.expires)) \\u0026\\u0026 new Date(epikLS.expires) \\u003e= new Date();\\n      let epikId = new URL(window.location.href).searchParams.get(\\\"epik\\\") || _satellite.cookie.get('_epik') || (epikLSValid \\u0026\\u0026 epikLS.value) || \\\"\\\";\\n      let referrerLink = digitalData?.page?.refererLink || null;\\n\\n      const transactionItemInfo = getTransactionItemInfo();\\n\\n      const utmParameters = JSON.parse(window.localStorage.getItem(\\\"utmParameters\\\"));\\n      const allowUtm = utmParameters?.expiration \\u003e= new Date().getTime() ? true : \\\"\\\";\\n      const {\\n        utm_id,\\n        utm_source,\\n        utm_medium,\\n        utm_campaign,\\n        utm_source_platform,\\n        utm_term,\\n        utm_content,\\n        utm_creative_format,\\n        utm_marketing_tactic\\n      } = allowUtm ? utmParameters : {};\\n      const lowerCaseParams = new URLSearchParams(\\n          Array.from(new URLSearchParams(new URL(window.location.href).search), ([key, value]) =\\u003e [key.toLowerCase(), value])\\n        );\\n      const rdtCidURL = lowerCaseParams.get('rdt_cid');\\n      rdtCidURL \\u0026\\u0026 sessionStorage.setItem('rdt_cid', rdtCidURL);\\n\\n      if (allowTracking || birthdayGift.length || promoCodeRedemption || referrerLink) {\\n          //console.log('sot log purchase', allowTracking, 'allowTracking');\\n          let pageTitle = digitalData.page.attributes.sephoraPageInfo.pageName;\\n          let languageLocale = digitalData.page.attributes.languageLocale?.toLowerCase()?.slice(-2);\\n          let biStatus = digitalData.user[0].segment.biStatus;\\n          let biPoints = digitalData.user[0].segment.biPoints;\\n          let profileId = digitalData.user[0].profile[0].profileInfo.profileID;\\n          let biAccountId = digitalData.user[0].segment.biAccountId;\\n          let platform = digitalData.page.attributes.platform;\\n          let emailId = digitalData.user[0].profile[0].profileInfo.email;\\n          let referrerCode = digitalData.page.attributes.campaigns.marketingChannel;\\n          // SA-591\\n          let signInStatus = digitalData.user[0].segment.signInStatus;\\n          let timestamp = new Date().getTime();\\n          //let eventId;\\n          //let uniqueId = digitalData.page.attributes.uniqueId;\\n          let digitalDataTimestamp = digitalData.page.attributes.date \\u0026\\u0026 digitalData.page.attributes.date.timestamp;\\n          let shippingCharge = digitalData.transaction.total.shipping;\\n\\n         // if ((digitalDataTimestamp + uniqueId)) {\\n          //     eventId = uniqueId + digitalDataTimestamp;\\n          // } else if (digitalData.user[0].profile[0].profileInfo.profileID \\u0026\\u0026 timestamp) {\\n          //     eventId = digitalData.user[0].profile[0].profileInfo.profileID +\\n          //         timestamp;\\n          // } else if (digitalData.anonymousUserId \\u0026\\u0026 timestamp) {\\n          //     eventId = digitalData.anonymousUserId + timestamp;\\n          // }\\n\\n          // Purchase attributes\\n          let orderId = digitalData.transaction.transactionID;\\n          let orderNetAmount = digitalData.transaction.total.transactionTotal;\\n          let currency = digitalData.transaction.attributes.isoCurrency;\\n          let productIds = digitalData.transaction.attributes.productIds \\u0026\\u0026 digitalData.transaction.attributes.productIds.join(';');\\n          let items = digitalData.transaction.item;\\n\\n          let skuIds = items.reduce(function (skuId, item, idx) {\\n              return idx === 0 ? item.sku.skuId : skuId + ';' + item.sku.skuId;\\n          }, '');\\n          let skuQuantitys = items.reduce(function (skuQty, item, idx) {\\n              return idx === 0 ? item.qty : skuQty + \\\";\\\" + item.qty;\\n          }, '');\\n          let skuPrices = items.reduce(function (skuPr, item, idx) {\\n              let price = (item.listPriceSubtotal?.toLowerCase().includes('free')) ? 0 : (item.sku.salePrice || item.sku.listPrice);\\n              return idx === 0 ? price : skuPr + \\\";\\\" + price;\\n          }, '');\\n\\n          let fbpValue = readCookie('_fbp');\\n          let fbcValue = readCookie('_fbc');\\n          //console.log(fbcValue, 'fbc value adobe purchase')\\n          let ccpaConsentCookie = readCookie(\\\"ccpaConsentCookie\\\") === '1' ? 1 : 0;\\n          let sduProps = safelyReadProperty(\\\"profile.userSubscriptions\\\", Sephora.Util.getUserInfoCache());\\n          let isTrialEligibleSdu = sduProps \\u0026\\u0026 sduProps[0].isTrialEligible;\\n          let statusSdu = sduProps \\u0026\\u0026 sduProps[0].status;\\n          let typeSdu = sduProps \\u0026\\u0026 sduProps[0].type;\\n          let sc_click_id = sessionStorage.getItem(\\\"sc_click_id\\\");\\n          const isReferrerLinkAvailable = checkSkuInReferrerLink(skuIds, referrerLink);\\n          const breadcrumbCategory = getBreadcrumbCategoryDisplayPaths(items);\\n\\n          let dataToSend = {\\n              campaign: {\\n                  referrerCode: referrerCode,\\n              },\\n              sysInfo: {\\n                  userLanguage: languageLocale,\\n                  ipAddress: _satellite.getVar('[TMS] System Var - IP'),\\n              },\\n              pageInfo: {\\n                  title: pageTitle,\\n              },\\n              session: {\\n                  biId: biAccountId,\\n                  biTier: biStatus,\\n                  biPoints: biPoints,\\n                  profileId: profileId,\\n                  platform: platform,\\n                  emailId: emailId,\\n                  signInState: signInStatus,\\n                  timestamp: timestamp,\\n                  atgId: _satellite.getVar(\\n                  \\\"[TMS] Async :: User :: ATG ID - page load or async page load\\\"\\n              ),\\n              },\\n              sotProps: {\\n                  sot20: timestamp + \\\"\\\"\\n              },\\n              sotVars: {\\n                  ////Event Info\\n                  sotV04: skuIds,\\n                  sotV05: skuQuantitys,\\n                  sotV06: skuPrices,\\n                  sotV07: getValues(digitalData.transaction.attributes.brandNames),\\n                  sotV08: transactionItemInfo?.categoryIds,\\n                  sotV09: currency,\\n                  sotV10: orderId,\\n                  sotV11: orderNetAmount,\\n                  sotV12: fbpValue,\\n                  sotV232: fbcValue,\\n                  sotV13: ccpaConsentCookie,\\n                  sotV15: productIds,\\n                  sotV28: digitalData.transaction.attributes.promoCode,\\n                  sotV63: setSotV63(digitalData.transaction.total.shippingMethod, linkName),\\n                  sotV64: _satellite.getVar(\\\"[TMS] Page :: Order :: Payment Method\\\"),\\n                  sotV77: 'adobe triggered',\\n                  sotV119: _satellite.getVar(\\\"[TMS] Page :: Country\\\"),\\n                  sotV163: transactionItemInfo?.displayNames,\\n                  sotV192: getValues(digitalData.transaction.attributes.categories),\\n                  sotV197: shippingCharge,\\n                  sotV201: SephSession,\\n                  sotV215: getValues(digitalData.transaction.attributes.itemName),\\n                  sotV216: getValues(digitalData.transaction.attributes.skuVariationTypes),\\n                  sotV217: getValues(digitalData.transaction.attributes.skuVariationValue),\\n                  sotV222: isTrialEligibleSdu,\\n                  sotV223: statusSdu,\\n                  sotV224: typeSdu,\\n                  sotV225: 'AL',\\n                  sotV226: false,\\n                  sotV227: readCookie('_scid'),\\n                  sotV237: _satellite.getVar(\\\"[SOT] Page :: language locale\\\"),\\n                  sotV277: ipAddress,\\n                  sotV285: readCookie('linkShareTime'),\\n                  sotV286: readCookie('siteId'),\\n                  sotV295: sc_click_id,\\n                  sotV302: _satellite.readCookie('ttclid') || \\\"\\\",\\n                  sotV303: _satellite.readCookie('_ttp') || \\\"\\\",\\n                  sotV324: gclid,\\n                  sotV325: epikId,\\n                  sotV278: _satellite.readCookie('referrer') || \\\"\\\",\\n                  sotV327: _satellite.getVar(\\\"[SOT] :: Forter Token\\\") || \\\"\\\",\\n                  sotV341: _satellite.getVar(\\\"[SOT] :: URL Navigation History\\\") || \\\"\\\",\\n                  sotV349: utm_id,\\n                  sotV350: utm_source,\\n                  sotV351: utm_medium,\\n                  sotV352: utm_campaign,\\n                  sotV353: utm_source_platform,\\n                  sotV354: utm_term,\\n                  sotV355: utm_content,\\n                  sotV356: utm_creative_format,\\n                  sotV357: utm_marketing_tactic,\\n                  sotV361: sessionStorage.getItem('rdt_cid'),\\n                  sotV362: _satellite.readCookie('_rdt_uuid') || \\\"\\\",\\n                  sotV365: profileId \\u0026\\u0026 await Sephora?.analytics?.utils?.hashString(profileId),\\n                  sotV366: biAccountId \\u0026\\u0026 await Sephora?.analytics?.utils?.hashString(biAccountId),\\n                  sotV369: transactionItemInfo?.urls,\\n                  sotV399: _satellite.getVar(\\\"[SOT] Page :: event_date_PST\\\"),\\n                  sotV420: breadcrumbCategory || \\\"\\\"\\n              },\\n              eventTime: timestamp,\\n              eventId: _satellite.getVar(\\\"[UEID] :: Universal Event ID Fx\\\")(event) || _satellite.getVar(\\\"[TMS] :: Event Id\\\"),\\n          };\\n\\n          if (allowPurchaseTracking) {\\n              //console.log('sot purchase', dataToSend);\\n              (window.sephoraOneTag_cmds = window.sephoraOneTag_cmds || []).push(['trackEvent', 'purchase', dataToSend]);\\n          }\\n      \\n          var isValidLinkName = getValidLinkName(linkName);\\n          //console.log('validLinkName-\\u003e', linkName, isValidLinkName);\\n          if (isValidLinkName \\u0026\\u0026 allowXTPurchaseTracking) {\\n              //console.log('sot purchase allowXTPurchaseTracking', dataToSend);\\n              (window.sephoraOneTag_cmds = window.sephoraOneTag_cmds || []).push(['trackEvent', formatSotType(linkName), dataToSend]);\\n          }\\n        \\n          //internal referrer influenced purchase event\\n          // SA-2806\\n          if(isReferrerLinkAvailable) {\\n              dataToSend.sotVars = {\\n                  sotV09: currency,\\n                  sotV10: orderId,\\n                  sotV12: fbpValue,\\n                  sotV232: fbcValue,\\n                  sotV13: ccpaConsentCookie,\\n                  sotV77: 'adobe triggered',\\n                  sotV201: SephSession,\\n                  sotV225: 'AL',\\n                  sotV226: false,\\n                  sotV227: readCookie('_scid'),\\n                  sotV237: _satellite.getVar(\\\"[SOT] Page :: language locale\\\"),\\n                  sotV278: _satellite.readCookie('referrer') || \\\"\\\",\\n                  sotV295: readCookie(\\\"sc_click_id\\\"),\\n                  sotV302: _satellite.readCookie('ttclid') || \\\"\\\",\\n                  sotV303: _satellite.readCookie('_ttp') || \\\"\\\",\\n                  sotV323: referrerLink || \\\"\\\",\\n                  sotV324: gclid,\\n                  sotV325: epikId,\\n                  sotV349: utm_id,\\n                  sotV350: utm_source,\\n                  sotV351: utm_medium,\\n                  sotV352: utm_campaign,\\n                  sotV353: utm_source_platform,\\n                  sotV354: utm_term,\\n                  sotV355: utm_content,\\n                  sotV356: utm_creative_format,\\n                  sotV357: utm_marketing_tactic,\\n                  sotV361: sessionStorage.getItem('rdt_cid'),\\n                  sotV362: _satellite.readCookie('_rdt_uuid') || \\\"\\\",\\n                  sotV399: _satellite.getVar(\\\"[SOT] Page :: event_date_PST\\\")\\n              }\\n              setTimeout(() =\\u003e {\\n                  (window.sephoraOneTag_cmds = window.sephoraOneTag_cmds || []).push(['trackEvent', 'internal referrer influenced purchase', dataToSend, null, true]);\\n              }, 100);\\n          }\\n        \\n        \\n          // Birthday Gift Card\\n          if (birthdayGift \\u0026\\u0026 birthdayGift.length) {\\n              const birthdayGiftObj = birthdayGift[0];\\n              const topCategory = getParentCategoryFromSkuList(birthdayGiftObj.sku.parentCategory, 'displayName') || \\\"n/a\\\";\\n              const birthDayGiftTimeStamp = new Date().getTime();\\n              let additionalDataToSend = {\\n                sotVars: {\\n                  sotV04: birthdayGiftObj.sku.skuId,\\n                  sotV15: birthdayGiftObj.sku.productId,\\n                  sotV07: birthdayGiftObj.sku.brandName,\\n                  sotV192: topCategory,\\n                  sotV215: birthdayGiftObj.sku.productName,\\n                  sotV222: isTrialEligibleSdu,\\n                  sotV223: statusSdu,\\n                  sotV224: typeSdu,\\n                  sotV296: birthDayGiftTimeStamp,\\n                }\\n              }\\n              const finalPayLoad = mergeObjects(dataToSend, additionalDataToSend);\\n              setTimeout(() =\\u003e {\\n                  (window.sephoraOneTag_cmds = window.sephoraOneTag_cmds || []).push(['trackEvent', 'birthday gift redemption', finalPayLoad, null, true]);\\n              }, 100);\\n          }\\n          if (promoCodeRedemption) {\\n              let transactions = digitalData?.transaction?.attributes || {};\\n              dataToSend.sotVars = {\\n                  sotV09: currency,\\n                  sotV12: fbpValue,\\n                  sotV13: ccpaConsentCookie,\\n                  sotV28: transactions.promoCodes ? transactions.promoCodes.join(\\\";\\\") : \\\"\\\",\\n                  sotV77: 'adobe triggered',\\n                  sotV201: SephSession,\\n                  sotV225: 'AL',\\n                  sotV226: false,\\n                  sotV227: readCookie('_scid'),\\n                  sotV237: _satellite.getVar(\\\"[SOT] Page :: language locale\\\"),\\n                  sotV232: fbcValue,\\n                  sotV295: readCookie('sc_click_id'),\\n                  sotV297: transactions.promotionIds ? transactions.promotionIds.join(\\\";\\\") : \\\"\\\" ,\\n                  sotV298: transactions.promoDisplayName ? transactions.promoDisplayName.join(\\\";\\\") : \\\"\\\",\\n                  sotV299: transactions.promotionTypes ? transactions.promotionTypes.join(\\\";\\\") : \\\"\\\",\\n                  sotV304: transactions.sephoraPromotionTypes ? transactions.sephoraPromotionTypes.join(\\\";\\\") : \\\"\\\",\\n                  sotV302: _satellite.readCookie('ttclid') || \\\"\\\",\\n                  sotV303: _satellite.readCookie('_ttp') || \\\"\\\",\\n                  sotV324: gclid,\\n                  sotV325: epikId,\\n                  sotV278: _satellite.readCookie('referrer') || \\\"\\\",\\n                  sotV349: utm_id,\\n                  sotV350: utm_source,\\n                  sotV351: utm_medium,\\n                  sotV352: utm_campaign,\\n                  sotV353: utm_source_platform,\\n                  sotV354: utm_term,\\n                  sotV355: utm_content,\\n                  sotV356: utm_creative_format,\\n                  sotV357: utm_marketing_tactic,\\n                  sotV361: sessionStorage.getItem('rdt_cid'),\\n                  sotV362: _satellite.readCookie('_rdt_uuid') || \\\"\\\",\\n                  sotV399: _satellite.getVar(\\\"[SOT] Page :: event_date_PST\\\")\\n              }\\n              setTimeout(() =\\u003e {\\n                  (window.sephoraOneTag_cmds = window.sephoraOneTag_cmds || []).push(['trackEvent', 'promo code redemption', dataToSend, null, true]);\\n              }, 100);\\n          }\\n      }\\n    if(_satellite.readCookie('referrer') !== \\\"\\\") {\\n      deleteCookie(\\\"referrer\\\");\\n    }\\n  }\\n  catch (error) {\\n      console.log(\\\"Failed in SOT - Purchase Event Tag\\\", error);\\n  }\\n})();\",\"language\":\"javascript\"}"
    },
    "relationships": {
        "updated_with_extension_package": {
            "links": {
                "related": "https://reactor.adobe.io/rule_components/RC1e01a8099f76433b824f48cba041d1ce/updated_with_extension_package"
            },
            "data": {
                "id": "EP1fdd2a6ec2ae468fb1d2cac08df65f83",
                "type": "extension_packages"
            }
        },
        "updated_with_extension": {
            "links": {
                "related": "https://reactor.adobe.io/rule_components/RC1e01a8099f76433b824f48cba041d1ce/updated_with_extension"
            },
            "data": {
                "id": "EX35ce3802460d499b9f4c856d69a764b4",
                "type": "extensions"
            }
        },
        "extension": {
            "links": {
                "related": "https://reactor.adobe.io/rule_components/RC1e01a8099f76433b824f48cba041d1ce/extension"
            },
            "data": {
                "id": "EX881e591abc3d4b29b9681e2a4d337f74",
                "type": "extensions"
            }
        },
        "notes": {
            "links": {
                "related": "https://reactor.adobe.io/rule_components/RC1e01a8099f76433b824f48cba041d1ce/notes"
            }
        },
        "origin": {
            "links": {
                "related": "https://reactor.adobe.io/rule_components/RC1e01a8099f76433b824f48cba041d1ce/origin"
            },
            "data": {
                "id": "RC1e01a8099f76433b824f48cba041d1ce",
                "type": "rule_components"
            }
        },
        "property": {
            "links": {
                "related": "https://reactor.adobe.io/properties/PR28bc45fcba184e70b64b2f0cf7fe70f8"
            },
            "data": {
                "id": "PR28bc45fcba184e70b64b2f0cf7fe70f8",
                "type": "properties"
            }
        },
        "rules": {
            "links": {
                "related": "https://reactor.adobe.io/rule_components/RC1e01a8099f76433b824f48cba041d1ce/rules"
            }
        }
    },
    "links": {
        "extension": "https://reactor.adobe.io/extensions/EX881e591abc3d4b29b9681e2a4d337f74",
        "origin": "https://reactor.adobe.io/rule_components/RC1e01a8099f76433b824f48cba041d1ce",
        "rules": "https://reactor.adobe.io/rule_components/RC1e01a8099f76433b824f48cba041d1ce/rules",
        "self": "https://reactor.adobe.io/rule_components/RC1e01a8099f76433b824f48cba041d1ce"
    },
    "meta": {
        "latest_revision_number": 93
    }
}
